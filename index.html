 <!doctype html><html lang="en"> <head>  <meta charset="UTF-8">  <meta name="viewport" content="width=device-width, initial-scale=1.0">  <title>Solar System Explorer</title>  <script src="/_sdk/element_sdk.js"></script>  <style>    body {      box-sizing: border-box;      margin: 0;      padding: 0;      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;      overflow: hidden;      height: 100%;      background: radial-gradient(ellipse at center, #1a1a2e 0%, #0a0a0f 100%);    }    html {      height: 100%;    }    #app-container {      width: 100%;      height: 100%;      position: relative;      display: flex;      flex-direction: column;    }    #header {      padding: 20px;      text-align: center;      z-index: 100;      background: linear-gradient(180deg, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0) 100%);    }    #title {      font-size: 2em;      font-weight: bold;      margin: 0;      text-shadow: 0 0 20px rgba(100, 200, 255, 0.5);    }    #subtitle {      font-size: 1em;      margin: 5px 0 0 0;      opacity: 0.8;    }    #canvas-container {      flex: 1;      position: relative;      overflow: hidden;    }    #space-canvas {      width: 100%;      height: 100%;      cursor: grab;    }    #space-canvas:active {      cursor: grabbing;    }    #controls {      position: absolute;      top: 20px;      right: 20px;      background: rgba(0, 0, 0, 0.7);      padding: 15px;      border-radius: 10px;      backdrop-filter: blur(10px);      border: 1px solid rgba(100, 200, 255, 0.3);    }    .control-group {      margin-bottom: 15px;    }    .control-group:last-child {      margin-bottom: 0;    }    .control-label {      font-size: 0.85em;      margin-bottom: 5px;      opacity: 0.9;    }    .button-group {      display: flex;      gap: 5px;    }    .control-btn {      padding: 8px 12px;      border: none;      border-radius: 5px;      cursor: pointer;      font-size: 0.85em;      transition: all 0.2s;      font-weight: 500;    }    .control-btn:hover {      transform: translateY(-2px);      box-shadow: 0 4px 12px rgba(100, 200, 255, 0.3);    }    .control-btn.active {      box-shadow: 0 0 15px rgba(100, 200, 255, 0.5);    }    #speed-slider {      width: 100%;      margin-top: 5px;    }    #info-panel {      position: absolute;      bottom: 20px;      left: 20px;      background: rgba(0, 0, 0, 0.8);      padding: 20px;      border-radius: 10px;      max-width: 350px;      backdrop-filter: blur(10px);      border: 1px solid rgba(100, 200, 255, 0.3);      display: none;    }    #info-panel.visible {      display: block;    }    .info-title {      font-size: 1.3em;      font-weight: bold;      margin-bottom: 10px;    }    .info-section {      margin-bottom: 12px;    }    .info-label {      font-size: 0.8em;      opacity: 0.7;      margin-bottom: 3px;    }    .info-value {      font-size: 0.95em;      font-weight: 500;    }    #legend {      position: absolute;      top: 20px;      left: 20px;      background: rgba(0, 0, 0, 0.7);      padding: 15px;      border-radius: 10px;      backdrop-filter: blur(10px);      border: 1px solid rgba(100, 200, 255, 0.3);    }    .legend-item {      display: flex;      align-items: center;      margin-bottom: 8px;      font-size: 0.85em;    }    .legend-item:last-child {      margin-bottom: 0;    }    .legend-color {      width: 20px;      height: 20px;      border-radius: 50%;      margin-right: 10px;      border: 2px solid rgba(255, 255, 255, 0.3);    }    .toast {      position: absolute;      top: 50%;      left: 50%;      transform: translate(-50%, -50%);      background: rgba(0, 0, 0, 0.9);      padding: 15px 25px;      border-radius: 8px;      font-size: 0.9em;      opacity: 0;      pointer-events: none;      transition: opacity 0.3s;      border: 1px solid rgba(100, 200, 255, 0.5);    }    .toast.show {      opacity: 1;    }  </style>  <style>@view-transition { navigation: auto; }</style>  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script> </head> <body>  <div id="app-container">   <header id="header">    <h1 id="title">Solar System Explorer</h1>    <p id="subtitle">Interactive 3D Space Exploration</p>   </header>   <div id="canvas-container">    <canvas id="space-canvas"></canvas>    <div id="legend">     <div class="legend-item">      <div class="legend-color" style="background: #4a9eff;"></div><span>Earth</span>     </div>     <div class="legend-item">      <div class="legend-color" style="background: #c0c0c0;"></div><span>Moon</span>     </div>     <div class="legend-item">      <div class="legend-color" style="background: #cd5c5c;"></div><span>Mars</span>     </div>     <div class="legend-item">      <div class="legend-color" style="background: #ffd700;"></div><span>Sun</span>     </div>    </div>    <div id="controls">     <div class="control-group">      <div class="control-label">       View Mode      </div>      <div class="button-group"><button class="control-btn active" data-view="free">Free</button> <button class="control-btn" data-view="earth">Earth</button> <button class="control-btn" data-view="mars">Mars</button>      </div>     </div>     <div class="control-group">      <div class="control-label">       Simulation Speed      </div><input type="range" id="speed-slider" min="0" max="10" value="5" step="1">      <div style="text-align: center; font-size: 0.8em; margin-top: 5px;"><span id="speed-display">1x</span>      </div>     </div>     <div class="control-group">      <div class="button-group"><button class="control-btn" id="pause-btn">Pause</button> <button class="control-btn" id="reset-btn">Reset</button>      </div>     </div>    </div>    <div id="info-panel">     <div class="info-title" id="info-body-name">      Celestial Body Information     </div>     <div class="info-section">      <div class="info-label">       Type      </div>      <div class="info-value" id="info-type">       -      </div>     </div>     <div class="info-section">      <div class="info-label">       Distance from Sun      </div>      <div class="info-value" id="info-distance">       -      </div>     </div>     <div class="info-section">      <div class="info-label">       Orbital Period      </div>      <div class="info-value" id="info-period">       -      </div>     </div>     <div class="info-section">      <div class="info-label">       Orbital Velocity      </div>      <div class="info-value" id="info-velocity">       -      </div>     </div>     <div class="info-section">      <div class="info-label">       Fun Fact      </div>      <div class="info-value" id="info-fact">       -      </div>     </div>    </div>    <div class="toast" id="toast"></div>   </div>  </div>  <script>    const defaultConfig = {      title_text: "Solar System Explorer",      subtitle_text: "Interactive 3D Space Exploration",      info_panel_title: "Celestial Body Information",      background_color: "#0a0a0f",      primary_color: "#4a9eff",      text_color: "#ffffff",      accent_color: "#ffd700",      surface_color: "#1a1a2e",      font_family: "Segoe UI",      font_size: 16    };    const celestialBodies = {      sun: {        name: "Sun",        type: "Star",        color: "#ffd700",        radius: 30,        x: 0,        y: 0,        distance: 0,        period: 0,        velocity: 0,        fact: "The Sun contains 99.86% of the mass in our solar system!"      },      earth: {        name: "Earth",        type: "Planet",        color: "#4a9eff",        radius: 12,        orbitRadius: 200,        angle: 0,        speed: 0.02,        distance: 149.6,        period: 365.25,        velocity: 29.78,        fact: "Earth is the only known planet with liquid water on its surface."      },      moon: {        name: "Moon",        type: "Natural Satellite",        color: "#c0c0c0",        radius: 4,        orbitRadius: 30,        angle: 0,        speed: 0.08,        distance: 0.384,        period: 27.3,        velocity: 1.022,        parent: "earth",        fact: "The Moon is slowly moving away from Earth at about 3.8 cm per year."      },      mars: {        name: "Mars",        type: "Planet",        color: "#cd5c5c",        radius: 10,        orbitRadius: 300,        angle: Math.PI,        speed: 0.015,        distance: 227.9,        period: 687,        velocity: 24.07,        fact: "Mars has the largest volcano in the solar system, Olympus Mons."      }    };    let canvas, ctx;    let camera = { x: 0, y: 0, zoom: 1 };    let isDragging = false;    let lastMouseX = 0;    let lastMouseY = 0;    let isPaused = false;    let speedMultiplier = 1;    let viewMode = "free";    let selectedBody = null;    let animationId = null;    function init() {      canvas = document.getElementById('space-canvas');      ctx = canvas.getContext('2d');            resizeCanvas();      window.addEventListener('resize', resizeCanvas);      canvas.addEventListener('mousedown', handleMouseDown);      canvas.addEventListener('mousemove', handleMouseMove);      canvas.addEventListener('mouseup', handleMouseUp);      canvas.addEventListener('wheel', handleWheel);      canvas.addEventListener('click', handleClick);      document.querySelectorAll('[data-view]').forEach(btn => {        btn.addEventListener('click', (e) => {          document.querySelectorAll('[data-view]').forEach(b => b.classList.remove('active'));          e.target.classList.add('active');          viewMode = e.target.dataset.view;          showToast(`View: ${viewMode.charAt(0).toUpperCase() + viewMode.slice(1)}`);        });      });      document.getElementById('speed-slider').addEventListener('input', (e) => {        const value = parseInt(e.target.value);        speedMultiplier = value === 0 ? 0 : Math.pow(2, value - 5);        document.getElementById('speed-display').textContent =           value === 0 ? '0x' : speedMultiplier.toFixed(1) + 'x';      });      document.getElementById('pause-btn').addEventListener('click', () => {        isPaused = !isPaused;        document.getElementById('pause-btn').textContent = isPaused ? 'Resume' : 'Pause';        showToast(isPaused ? 'Simulation Paused' : 'Simulation Resumed');      });      document.getElementById('reset-btn').addEventListener('click', () => {        celestialBodies.earth.angle = 0;        celestialBodies.moon.angle = 0;        celestialBodies.mars.angle = Math.PI;        camera = { x: 0, y: 0, zoom: 1 };        selectedBody = null;        document.getElementById('info-panel').classList.remove('visible');        showToast('View Reset');      });      animate();    }    function resizeCanvas() {      const container = document.getElementById('canvas-container');      canvas.width = container.clientWidth;      canvas.height = container.clientHeight;    }    function handleMouseDown(e) {      isDragging = true;      lastMouseX = e.clientX;      lastMouseY = e.clientY;    }    function handleMouseMove(e) {      if (isDragging && viewMode === 'free') {        const dx = e.clientX - lastMouseX;        const dy = e.clientY - lastMouseY;        camera.x += dx;        camera.y += dy;        lastMouseX = e.clientX;        lastMouseY = e.clientY;      }    }    function handleMouseUp() {      isDragging = false;    }    function handleWheel(e) {      e.preventDefault();      const zoomFactor = e.deltaY > 0 ? 0.9 : 1.1;      camera.zoom = Math.max(0.3, Math.min(3, camera.zoom * zoomFactor));    }    function handleClick(e) {      const rect = canvas.getBoundingClientRect();      const mouseX = e.clientX - rect.left;      const mouseY = e.clientY - rect.top;      let clickedBody = null;      let minDist = Infinity;      Object.entries(celestialBodies).forEach(([key, body]) => {        const pos = getBodyPosition(body);        const screenX = (pos.x + camera.x) * camera.zoom + canvas.width / 2;        const screenY = (pos.y + camera.y) * camera.zoom + canvas.height / 2;        const dist = Math.sqrt(Math.pow(mouseX - screenX, 2) + Math.pow(mouseY - screenY, 2));                if (dist < body.radius * camera.zoom && dist < minDist) {          minDist = dist;          clickedBody = body;        }      });      if (clickedBody) {        selectedBody = clickedBody;        showInfoPanel(clickedBody);      } else {        selectedBody = null;        document.getElementById('info-panel').classList.remove('visible');      }    }    function getBodyPosition(body) {      if (body.name === "Sun") {        return { x: body.x, y: body.y };      }            if (body.parent) {        const parent = celestialBodies[body.parent];        const parentPos = getBodyPosition(parent);        return {          x: parentPos.x + Math.cos(body.angle) * body.orbitRadius,          y: parentPos.y + Math.sin(body.angle) * body.orbitRadius        };      }            return {        x: Math.cos(body.angle) * body.orbitRadius,        y: Math.sin(body.angle) * body.orbitRadius      };    }    function showInfoPanel(body) {      document.getElementById('info-body-name').textContent = body.name;      document.getElementById('info-type').textContent = body.type;      document.getElementById('info-distance').textContent =         body.distance > 0 ? `${body.distance} million km` : 'Center of system';      document.getElementById('info-period').textContent =         body.period > 0 ? `${body.period} Earth days` : 'N/A';      document.getElementById('info-velocity').textContent =         body.velocity > 0 ? `${body.velocity} km/s` : 'N/A';      document.getElementById('info-fact').textContent = body.fact;      document.getElementById('info-panel').classList.add('visible');    }    function showToast(message) {      const toast = document.getElementById('toast');      toast.textContent = message;      toast.classList.add('show');      setTimeout(() => {        toast.classList.remove('show');      }, 2000);    }    function updatePositions() {      if (!isPaused) {        Object.entries(celestialBodies).forEach(([key, body]) => {          if (body.speed) {            body.angle += body.speed * speedMultiplier;          }        });      }    }    function updateCamera() {      if (viewMode === 'earth') {        const earthPos = getBodyPosition(celestialBodies.earth);        camera.x = -earthPos.x;        camera.y = -earthPos.y;      } else if (viewMode === 'mars') {        const marsPos = getBodyPosition(celestialBodies.mars);        camera.x = -marsPos.x;        camera.y = -marsPos.y;      }    }    function drawStars() {      ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';      for (let i = 0; i < 200; i++) {        const x = (i * 137.5) % canvas.width;        const y = (i * 197.3) % canvas.height;        const size = (i % 3) * 0.5 + 0.5;        ctx.fillRect(x, y, size, size);      }    }    function drawOrbit(body) {      if (!body.orbitRadius) return;      const centerPos = body.parent ? getBodyPosition(celestialBodies[body.parent]) : { x: 0, y: 0 };      const screenX = (centerPos.x + camera.x) * camera.zoom + canvas.width / 2;      const screenY = (centerPos.y + camera.y) * camera.zoom + canvas.height / 2;      ctx.beginPath();      ctx.arc(screenX, screenY, body.orbitRadius * camera.zoom, 0, Math.PI * 2);      ctx.strokeStyle = 'rgba(100, 200, 255, 0.2)';      ctx.lineWidth = 1;      ctx.stroke();    }    function drawBody(body) {      const pos = getBodyPosition(body);      const screenX = (pos.x + camera.x) * camera.zoom + canvas.width / 2;      const screenY = (pos.y + camera.y) * camera.zoom + canvas.height / 2;      ctx.beginPath();      ctx.arc(screenX, screenY, body.radius * camera.zoom, 0, Math.PI * 2);            if (body.name === "Sun") {        const gradient = ctx.createRadialGradient(screenX, screenY, 0, screenX, screenY, body.radius * camera.zoom);        gradient.addColorStop(0, body.color);        gradient.addColorStop(1, 'rgba(255, 215, 0, 0.3)');        ctx.fillStyle = gradient;      } else {        ctx.fillStyle = body.color;      }            ctx.fill();      if (selectedBody === body) {        ctx.strokeStyle = 'rgba(255, 255, 255, 0.8)';        ctx.lineWidth = 2;        ctx.stroke();      }      ctx.fillStyle = '#ffffff';      ctx.font = `${Math.max(10, 12 * camera.zoom)}px ${defaultConfig.font_family}`;      ctx.textAlign = 'center';      ctx.fillText(body.name, screenX, screenY + body.radius * camera.zoom + 15);    }    function draw() {      ctx.fillStyle = defaultConfig.background_color;      ctx.fillRect(0, 0, canvas.width, canvas.height);      drawStars();      Object.values(celestialBodies).forEach(body => {        if (body.orbitRadius) {          drawOrbit(body);        }      });      drawBody(celestialBodies.sun);      drawBody(celestialBodies.earth);      drawBody(celestialBodies.moon);      drawBody(celestialBodies.mars);    }    function animate() {      updatePositions();      updateCamera();      draw();      animationId = requestAnimationFrame(animate);    }    async function onConfigChange(config) {      const titleElement = document.getElementById('title');      const subtitleElement = document.getElementById('subtitle');      const infoPanelTitle = document.getElementById('info-body-name');            titleElement.textContent = config.title_text || defaultConfig.title_text;      subtitleElement.textContent = config.subtitle_text || defaultConfig.subtitle_text;            if (!selectedBody) {        infoPanelTitle.textContent = config.info_panel_title || defaultConfig.info_panel_title;      }      const customFont = config.font_family || defaultConfig.font_family;      const baseFontStack = 'Segoe UI, Tahoma, Geneva, Verdana, sans-serif';      const fontFamily = `${customFont}, ${baseFontStack}`;            document.body.style.fontFamily = fontFamily;            const baseSize = config.font_size || defaultConfig.font_size;      titleElement.style.fontSize = `${baseSize * 2}px`;      subtitleElement.style.fontSize = `${baseSize}px`;      document.querySelectorAll('.control-label, .legend-item, .info-label').forEach(el => {        el.style.fontSize = `${baseSize * 0.85}px`;      });      document.querySelectorAll('.info-value').forEach(el => {        el.style.fontSize = `${baseSize * 0.95}px`;      });      document.querySelectorAll('.info-title').forEach(el => {        el.style.fontSize = `${baseSize * 1.3}px`;      });      const bgColor = config.background_color || defaultConfig.background_color;      const primaryColor = config.primary_color || defaultConfig.primary_color;      const textColor = config.text_color || defaultConfig.text_color;      const accentColor = config.accent_color || defaultConfig.accent_color;      const surfaceColor = config.surface_color || defaultConfig.surface_color;      document.body.style.background = `radial-gradient(ellipse at center, ${surfaceColor} 0%, ${bgColor} 100%)`;      titleElement.style.color = textColor;      subtitleElement.style.color = textColor;      titleElement.style.textShadow = `0 0 20px ${primaryColor}80`;      document.querySelectorAll('.control-btn').forEach(btn => {        btn.style.backgroundColor = primaryColor;        btn.style.color = textColor;      });      document.querySelectorAll('.control-btn.active').forEach(btn => {        btn.style.boxShadow = `0 0 15px ${primaryColor}80`;      });      celestialBodies.earth.color = primaryColor;      celestialBodies.sun.color = accentColor;    }    if (window.elementSdk) {      window.elementSdk.init({        defaultConfig,        onConfigChange,        mapToCapabilities: (config) => ({          recolorables: [            {              get: () => config.background_color || defaultConfig.background_color,              set: (value) => {                config.background_color = value;                window.elementSdk.setConfig({ background_color: value });              }            },            {              get: () => config.surface_color || defaultConfig.surface_color,              set: (value) => {                config.surface_color = value;                window.elementSdk.setConfig({ surface_color: value });           